<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>2025 京都自由行</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'maple-red': '#C0392B',
                        'maple-orange': '#D35400',
                        'bg-beige': '#FDF2E9',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #FDF2E9; -webkit-tap-highlight-color: transparent; }
        .banner-mask { height: 280px; clip-path: ellipse(150% 100% at 50% 0%); overflow: hidden; position: relative; }
        .banner-img { width: 100%; height: 100%; object-fit: cover; }
        .main-container { margin-top: -60px; position: relative; z-index: 10; padding-bottom: 120px; }
        .active-day { background-color: #C0392B !important; color: white !important; box-shadow: 0 4px 6px rgba(192, 57, 43, 0.4); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .btn-shadow { box-shadow: 0 4px 0 #922B21; transition: all 0.1s; }
        .btn-shadow:active { transform: translateY(4px); box-shadow: 0 0 0 #922B21; }
        [v-cloak] { display: none; }
    </style>
</head>
<body>

<div id="app" v-cloak>
    <div class="banner-mask">
        <img src="https://images.unsplash.com/photo-1508020963102-c6c723276907?auto=format&fit=crop&w=1920&q=80" class="banner-img" alt="Kyoto Maple">
        <div class="absolute bottom-20 right-5 flex gap-3 z-20">
            <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id"
                :class="['w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all', currentTab === tab.id ? 'bg-maple-red text-white scale-110' : 'bg-white text-gray-400']">
                <i :class="tab.icon + ' text-lg'"></i>
            </button>
        </div>
    </div>

    <main class="main-container px-4">
        
        <div v-if="currentTab === 'plan'" class="space-y-6">
            <div class="bg-white/90 backdrop-blur rounded-3xl p-4 shadow-sm flex items-center justify-between border border-orange-100">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-cloud-sun text-3xl text-maple-orange"></i>
                    <div><p class="font-bold text-gray-800">京都 12°C</p><p class="text-xs text-gray-500">降雨機率 10%</p></div>
                </div>
                <span class="text-[10px] bg-orange-100 text-orange-600 px-2 py-1 rounded-full">LIVE</span>
            </div>

            <div class="flex overflow-x-auto gap-3 pb-2 no-scrollbar">
                <button v-for="(day, index) in schedule" :key="index" @click="activeDay = index"
                    :class="['flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center transition-all bg-white text-gray-400 shadow-sm', activeDay === index ? 'active-day' : '']">
                    <span class="text-xs font-bold uppercase">{{ day.week }}</span>
                    <span class="text-2xl font-black">{{ day.date }}</span>
                </button>
            </div>

            <div class="space-y-4">
                <div v-for="(item, idx) in schedule[activeDay].items" :key="idx" class="relative pl-4 border-l-2 border-orange-100 ml-2">
                    <div v-if="item.transport" class="absolute -left-[19px] top-[-25px] flex items-center gap-2 bg-bg-beige px-2 py-1 rounded-full text-[10px] text-gray-500">
                        <i :class="getTransportIcon(item.transportType)"></i> {{ item.transport }}
                    </div>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-gray-50 relative overflow-hidden group">
                        <div class="absolute -left-[21px] top-6 w-3 h-3 rounded-full bg-maple-orange border-2 border-white shadow"></div>
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <span class="text-[10px] font-bold text-maple-red px-2 py-0.5 bg-red-50 rounded-full mb-1 inline-block">{{ item.tag }}</span>
                                <h3 class="font-bold text-lg text-gray-800">{{ item.title }}</h3>
                            </div>
                            <a v-if="item.map" :href="item.map" target="_blank" class="w-8 h-8 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center"><i class="fa-solid fa-location-arrow"></i></a>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-500 font-medium mb-2"><i class="fa-regular fa-clock"></i> {{ item.time }}</div>
                        <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-xl leading-relaxed" v-if="item.desc" v-html="item.desc"></p>
                    </div>
                </div>
            </div>

            <button @click="addScheduleItem" class="fixed bottom-6 right-6 w-14 h-14 bg-maple-orange text-white rounded-full shadow-xl flex items-center justify-center text-2xl z-50 hover:scale-110 transition-transform btn-shadow">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>

        <div v-if="currentTab === 'info'" class="space-y-6 bg-white rounded-3xl p-6 shadow-sm">
            <h2 class="text-2xl font-black text-gray-800 border-l-4 border-maple-red pl-3">INFO</h2>
            <div class="bg-gray-900 text-white p-5 rounded-2xl">
                <p class="text-xs text-gray-400 mb-2 font-bold tracking-widest">匯率換算 (0.22)</p>
                <div class="flex items-center gap-4">
                    <input type="number" v-model="jpy" placeholder="JPY" class="bg-transparent text-3xl font-bold w-full outline-none border-b border-gray-700">
                    <i class="fa-solid fa-arrow-right text-gray-500"></i>
                    <div class="text-3xl font-bold text-maple-orange"><span class="text-sm text-gray-400">NT$</span>{{ Math.round(jpy * 0.22) }}</div>
                </div>
            </div>
            <div>
                <h3 class="font-bold text-gray-400 text-xs uppercase mb-3">Hotels</h3>
                <div class="space-y-3">
                    <div v-for="h in hotels" class="p-3 border border-gray-100 rounded-xl">
                        <span class="text-[10px] bg-gray-200 px-2 py-0.5 rounded text-gray-600 font-bold">{{ h.date }}</span>
                        <p class="font-bold text-gray-800 mt-1">{{ h.name }}</p>
                        <a :href="h.map" target="_blank" class="text-xs text-blue-500 mt-1 inline-block"><i class="fa-solid fa-map-pin"></i> 導航</a>
                    </div>
                </div>
            </div>
            <div>
                <h3 class="font-bold text-gray-400 text-xs uppercase mb-3">Flights</h3>
                <div class="p-3 bg-gray-50 rounded-xl mb-2">
                    <p class="font-bold text-maple-red">去程 BR182</p>
                    <p class="text-xs">12/1 07:05 KHH > 10:55 KIX</p>
                </div>
                <div class="p-3 bg-gray-50 rounded-xl">
                    <p class="font-bold text-maple-red">回程 BR181</p>
                    <p class="text-xs">12/11 11:55 KIX > 14:30 KHH</p>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'shopping'" class="bg-white rounded-3xl p-6 shadow-sm min-h-[60vh] relative">
            <h2 class="text-2xl font-black text-gray-800 border-l-4 border-maple-orange pl-3 mb-6">SHOPPING</h2>
            
            <div class="flex gap-2 mb-6">
                <input v-model="newShopItem" placeholder="輸入想買的物品..." class="flex-1 bg-gray-100 p-3 rounded-xl outline-none border border-transparent focus:border-maple-orange">
                <button @click="addShopItem" class="bg-maple-orange text-white w-12 rounded-xl btn-shadow flex items-center justify-center"><i class="fa-solid fa-plus"></i></button>
            </div>

            <div class="space-y-3">
                <div v-for="(item, idx) in shoppingList" :key="idx" class="flex items-center justify-between p-4 bg-bg-beige rounded-2xl">
                    <div class="flex items-center gap-3">
                        <input type="checkbox" v-model="item.done" class="w-5 h-5 accent-maple-orange rounded">
                        <span :class="['font-bold', item.done ? 'line-through text-gray-400' : 'text-gray-800']">{{ item.name }}</span>
                    </div>
                    <button @click="removeShopItem(idx)" class="text-gray-400 hover:text-red-500"><i class="fa-solid fa-trash"></i></button>
                </div>
                <div v-if="shoppingList.length === 0" class="text-center text-gray-300 py-10">
                    <i class="fa-solid fa-basket-shopping text-4xl mb-2"></i>
                    <p>清單是空的</p>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'wallet'" class="bg-white rounded-3xl p-6 shadow-sm min-h-[60vh]">
            <h2 class="text-2xl font-black text-gray-800 border-l-4 border-gray-800 pl-3 mb-6">WALLET</h2>

            <div class="bg-gray-800 text-white p-5 rounded-2xl mb-6 shadow-lg">
                <p class="text-xs text-gray-400 mb-1 uppercase tracking-widest">Total Spent</p>
                <p class="text-4xl font-black text-maple-orange">¥ {{ totalExpense.toLocaleString() }}</p>
                <p class="text-xs text-gray-500 mt-1">≈ NT$ {{ Math.round(totalExpense * 0.22).toLocaleString() }}</p>
            </div>

            <div class="flex gap-2 mb-4">
                <input v-model="newExpenseName" placeholder="項目" class="flex-1 bg-gray-100 p-3 rounded-xl outline-none text-sm">
                <input v-model="newExpensePrice" type="number" placeholder="¥" class="w-24 bg-gray-100 p-3 rounded-xl outline-none text-sm">
                <button @click="addExpense" class="bg-gray-800 text-white w-12 rounded-xl btn-shadow flex items-center justify-center"><i class="fa-solid fa-plus"></i></button>
            </div>

            <div class="space-y-3">
                <div v-for="(ex, idx) in expenses" :key="idx" class="flex justify-between items-center p-3 border-b border-gray-100">
                    <span class="font-bold text-gray-600">{{ ex.name }}</span>
                    <div class="flex items-center gap-3">
                        <span class="font-bold text-gray-800">¥ {{ parseInt(ex.price).toLocaleString() }}</span>
                        <button @click="removeExpense(idx)" class="text-gray-300 hover:text-red-500 text-xs"><i class="fa-solid fa-xmark"></i></button>
                    </div>
                </div>
            </div>
        </div>

    </main>
</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const currentTab = ref('plan');
            const activeDay = ref(0);
            const jpy = ref('');

            // --- 購物清單邏輯 ---
            const newShopItem = ref('');
            const shoppingList = ref([]);
            const addShopItem = () => {
                if(newShopItem.value.trim()) {
                    shoppingList.value.push({ name: newShopItem.value, done: false });
                    newShopItem.value = '';
                }
            };
            const removeShopItem = (idx) => shoppingList.value.splice(idx, 1);

            // --- 記帳邏輯 ---
            const newExpenseName = ref('');
            const newExpensePrice = ref('');
            const expenses = ref([]);
            const addExpense = () => {
                if(newExpenseName.value.trim() && newExpensePrice.value) {
                    expenses.value.unshift({ name: newExpenseName.value, price: newExpensePrice.value });
                    newExpenseName.value = '';
                    newExpensePrice.value = '';
                }
            };
            const removeExpense = (idx) => expenses.value.splice(idx, 1);
            const totalExpense = computed(() => expenses.value.reduce((acc, cur) => acc + parseInt(cur.price || 0), 0));

            // --- 行程新增邏輯 (簡易版) ---
            const addScheduleItem = () => {
                const title = prompt("輸入行程名稱:");
                if (title) {
                    schedule[activeDay.value].items.push({
                        tag: '自訂',
                        title: title,
                        time: '待定',
                        desc: '新增的行程項目'
                    });
                }
            };

            // 分頁設定
            const tabs = [
                { id: 'plan', icon: 'fa-solid fa-map-location-dot' },
                { id: 'info', icon: 'fa-solid fa-circle-info' },
                { id: 'shopping', icon: 'fa-solid fa-bag-shopping' },
                { id: 'wallet', icon: 'fa-solid fa-wallet' }
            ];

            const hotels = [
                { date: '12/1-12/5', name: 'HOTEL TAVINOS KYOTO', map: 'https://maps.app.goo.gl/GrAkB11cmNn57mP98' },
                { date: '12/6-12/7', name: 'Fairfield by Marriott Amanohashidate', map: 'https://maps.app.goo.gl/mzVBjuJjCPPBfZoD8' },
                { date: '12/8-12/10', name: '大阪東急卓越大酒店', map: 'https://maps.app.goo.gl/cdqtuwEE88ELaUqf7' }
            ];

            // 完整行程資料 (D1-D11)
            const schedule = [
                {
                    week: 'Sun', date: '01',
                    items: [
                        { tag: '航班', title: '抵達大阪', time: '10:55', desc: 'BR182 抵達 KIX，出關後前往京都', transport: 'plane', transportType: 'plane' },
                        { tag: '交通', title: '前往京都', time: '13:00', desc: '搭乘 Haruka 或巴士 (約 1.5hr)', transport: '1.5hr', transportType: 'train' },
                        { tag: '住宿', title: 'Check-in', time: '15:00', desc: 'HOTEL TAVINOS KYOTO 放行李', map: 'https://maps.app.goo.gl/GrAkB11cmNn57mP98' },
                        { tag: '美食', title: '大力邸', time: '16:00', desc: '享用晚餐', map: 'https://maps.app.goo.gl/hfXKxgMXKN6q8hzK9' },
                        { tag: '景點', title: '夜楓巡禮', time: '18:00', desc: '永觀堂、東寺夜間參拜', map: 'https://maps.app.goo.gl/dZsazXwqarpga3p9A' }
                    ]
                },
                { week: 'Mon', date: '02', items: [{ tag: '場勘', title: '京都巡禮', time: '09:00', desc: '路線：鴨川 → 花見小路 → 祇園白川 → 璃光和服 → 八阪神社' }, { tag: '其他', title: '自由活動', time: '14:00', desc: '飲料販賣機考察、市區逛街' }] },
                { week: 'Tue', date: '03', items: [{ tag: '攝影', title: '全家福拍攝', time: '08:00', desc: '筱芷全家福開拍' }] },
                { week: 'Wed', date: '04', items: [{ tag: '婚紗', title: '化妝', time: '05:15', desc: '飯店內造型開始 (至 08:15)' }, { tag: '婚紗', title: '南禪寺 (白紗)', time: '08:40', desc: '搭 Uber 前往，拍攝楓葉景', map: 'https://maps.app.goo.gl/dZsazXwqarpga3p9A', transport: 'Uber', transportType: 'car' }, { tag: '婚紗', title: '移動換裝', time: '10:40', desc: '前往和服店' }, { tag: '婚紗', title: '二三年阪 (和服)', time: '12:30', desc: '日式街景拍攝', map: '' }] },
                { week: 'Thu', date: '05', items: [{ tag: '婚紗', title: '化妝', time: '05:00', desc: '飯店造型開始' }, { tag: '婚紗', title: '邊走邊拍 (白紗)', time: '08:00', desc: '鴨川、花見小路、祇園周邊', transport: 'Walk', transportType: 'walk' }, { tag: '婚紗', title: '換造型', time: '11:00', desc: '回飯店換裝' }, { tag: '婚紗', title: '真如堂 (黑紗)', time: '12:00', desc: '搭 Uber 前往拍攝', transport: 'Uber', transportType: 'car' }] },
                { week: 'Fri', date: '06', items: [{ tag: '移動', title: '退房午餐', time: '10:00', desc: '京都車站用餐，購買 JR PASS' }, { tag: '交通', title: '前往西舞鶴', time: '12:25', desc: 'JR 列車 (抵達 13:54)', transport: 'Train', transportType: 'train' }, { tag: '交通', title: '青松號', time: '14:37', desc: '西舞鶴發車 → 天橋立 (15:18)', transportType: 'train' }, { tag: '景點', title: '天橋立沙洲', time: '15:30', desc: 'Check-in 後散步', map: 'https://maps.app.goo.gl/WGSuJ9RVLg9EkLe97' }, { tag: '美食', title: '富田屋', time: '18:00', desc: '晚餐、宮津市區漫步', map: 'https://maps.app.goo.gl/FMrDLK1WYR7x8fc59' }] },
                { week: 'Sat', date: '07', items: [{ tag: '景點', title: 'View Land', time: '09:00', desc: '搭乘纜車/吊椅上山看飛龍觀', map: 'https://maps.app.goo.gl/c8CbcXQoiQ9cfpgt6' }, { tag: '美食', title: '松和物産 本店', time: '11:00', desc: '下山午餐', map: 'https://maps.app.goo.gl/Wsc1p4FSy6XZP7gJ9' }, { tag: '交通', title: '前往伊根', time: '12:30', desc: '搭乘巴士 (約30-60分)', transport: 'Bus', transportType: 'bus' }, { tag: '景點', title: '伊根舟屋', time: '14:00', desc: 'Ine Cafe 下午茶、伊根浦公園', map: 'https://maps.app.goo.gl/QXo7TDfrugrgY8Ww7' }, { tag: '交通', title: '返回天橋立', time: '17:00', desc: '搭巴士回飯店', transportType: 'bus' }] },
                { week: 'Sun', date: '08', items: [{ tag: '交通', title: '返回大阪', time: '11:55', desc: '搭火車前往大阪 (14:23 抵達)', transport: 'Train', transportType: 'train' }, { tag: '住宿', title: '大阪東急卓越', time: '15:00', desc: 'Check-in', map: 'https://maps.app.goo.gl/cdqtuwEE88ELaUqf7' }, { tag: '景點', title: '道頓崛坐船', time: '16:00', desc: '驚安殿堂旁搭船 (20分鐘)' }, { tag: '景點', title: '摩天輪', time: '20:00', desc: '唐吉訶德摩天輪', map: 'https://maps.app.goo.gl/EYXuAxRUkipeCY5i9' }, { tag: '美食', title: '螃蟹料理', time: '21:00', desc: '道頓崛周邊晚餐', map: 'https://maps.app.goo.gl/sJEvmTap5yQeCz8B8' }] },
                { week: 'Mon', date: '09', items: [{ tag: '景點', title: '環球影城', time: '08:30', desc: '抵達 USJ', transport: 'Train', transportType: 'train' }, { tag: '活動', title: 'VIP 導覽', time: '10:30', desc: '導覽開始，請準時集合' }] },
                { week: 'Tue', date: '10', items: [{ tag: '景點', title: '大阪市區', time: '10:00', desc: '通天閣溜滑梯', map: 'https://maps.app.goo.gl/EDMsaoQSa8ZWZfGn6' }, { tag: '景點', title: '中崎町', time: '14:00', desc: '散步、下午茶', map: 'https://maps.app.goo.gl/jevJ9raG4xTxP8oT8' }, { tag: '美食', title: '浪芳庵', time: '16:00', desc: '日式點心', map: 'https://maps.app.goo.gl/ogQii3XbMCJmJ8LZ6' }] },
                { week: 'Wed', date: '11', items: [{ tag: '交通', title: '前往機場', time: '07:00', desc: '專車/巴士前往 KIX (1小時)', transport: 'Car', transportType: 'car' }, { tag: '航班', title: '返回高雄', time: '11:55', desc: 'EVA BR181 起飛 -> 14:30 抵達', transport: 'plane', transportType: 'plane' }] }
            ];

            const getTransportIcon = (type) => {
                const map = { plane: 'fa-solid fa-plane', train: 'fa-solid fa-train-subway', bus: 'fa-solid fa-bus', car: 'fa-solid fa-car', walk: 'fa-solid fa-person-walking' };
                return map[type] || 'fa-solid fa-location-arrow';
            };

            return { currentTab, activeDay, jpy, tabs, schedule, hotels, getTransportIcon, newShopItem, shoppingList, addShopItem, removeShopItem, newExpenseName, newExpensePrice, expenses, addExpense, removeExpense, totalExpense, addScheduleItem };
        }
    }).mount('#app');
</script>
</body>
</html>
